<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Spark Memory Architecture" /><meta name="author" content="Jaegoo Kim" /><meta property="og:locale" content="en" /><meta name="description" content="Spark Legacy Memory Architecture" /><meta property="og:description" content="Spark Legacy Memory Architecture" /><link rel="canonical" href="https://jaegukim.github.io/posts/spark-memory-architecture/" /><meta property="og:url" content="https://jaegukim.github.io/posts/spark-memory-architecture/" /><meta property="og:site_name" content="Study Log" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-02-13T16:44:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Spark Memory Architecture" /><meta name="twitter:site" content="@JaeguKim" /><meta name="twitter:creator" content="@Jaegoo Kim" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jaegoo Kim"},"dateModified":"2021-06-02T20:55:25+08:00","datePublished":"2021-02-13T16:44:00+08:00","description":"Spark Legacy Memory Architecture","headline":"Spark Memory Architecture","mainEntityOfPage":{"@type":"WebPage","@id":"https://jaegukim.github.io/posts/spark-memory-architecture/"},"url":"https://jaegukim.github.io/posts/spark-memory-architecture/"}</script><title>Spark Memory Architecture | Study Log</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Study Log"><meta name="application-name" content="Study Log"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/22807942?s=460&u=cc1d822a8be2c87ac3aa4917adaadeca5487c515&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Study Log</a></div><div class="site-subtitle font-italic">“ In order to be irreplaceable, one must always be different” – Coco Chanel</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/JaeguKim" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/JaeguKim" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['kimwithglasses','kakao.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Spark Memory Architecture</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Spark Memory Architecture</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Jaegoo.Kim </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Feb 13, 2021, 4:44 PM +0800" >Feb 13, 2021<i class="unloaded">2021-02-13T16:44:00+08:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Jun 2, 2021, 9:55 PM +0900" >Jun 2, 2021<i class="unloaded">2021-06-02T20:55:25+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1901 words">10 min read</span></div></div><div class="post-content"><h2 id="spark-legacy-memory-architecture">Spark Legacy Memory Architecture</h2><h3 id="executor">Executor</h3><p><strong>worker node</strong> 에서 수행되는 Spark application의 JVM process이다. 여러 스레드로 task들을 수행하며 관련있는 데이터 파티션들을 유지한다.</p><h3 id="executor-memory-구조">Executor Memory 구조</h3><p><img data-proofer-ignore data-src="https://i0.wp.com/0x0fff.com/wp-content/uploads/2015/03/Spark-Heap-Usage.png?w=475&amp;ssl=1" alt="img" /></p><p>YARN에 10gb의 executor을 워커노드상에서 요청할때, 10gb 전체가 이용가능하다고 생각하기 쉽지만 사실 <strong>safety</strong> 리전이 존재한다. 이는 OOM을 방지 하기 위한 공간이다. <strong>safety</strong> 공간은 10%점유하고 configuration에는 <code class="language-plaintext highlighter-rouge">spark.storage.safetyFraction</code> 이라고 명시된다.</p><blockquote><p>결국, 10gb executor는 9gb의 사용가능한 공간이 있다.</p></blockquote><h4 id="storage">Storage</h4><p><code class="language-plaintext highlighter-rouge">spark.storage.memoryFraction</code> 와 <code class="language-plaintext highlighter-rouge">spark.shuffle.memoryFraction</code>. 그리고 각각 60%, 20% 로 설정되어있다. 따라서 10gb의 executor에서, <strong>storage</strong> 공간은 <code class="language-plaintext highlighter-rouge">10 gb * 90% * 60%</code> , 즉 5.4gb 이다.</p><p>이는 executor는 caching data를 제외하고 5.4 gb를 소유하고 있음을 의미한다. 만약 데이터가 메모리에 들어가지 않는다면, <strong>storage level</strong> 에 따라서 disk에 남은 데이터가 저장되거나 가능한 만큼만 캐싱한다.</p><h4 id="shuffle">Shuffle</h4><p>다른 config로는 <code class="language-plaintext highlighter-rouge">spark.shuffle.safetyFraction</code> 이 있는데, 디폴트값은 80%이다(JVM heap 전체의 80%). <strong>shuffle</strong> 영역은 pre-reduce aggregation에 사용된다. 이 영역이 사용되는 한가지 예는 <code class="language-plaintext highlighter-rouge">reduceByKey</code> 작업을 할때인데, reduce작업이 로컬에서 먼저 수행되고 <strong>shuffle memory</strong>가 결과를 저장하기 위해 사용된다. <code class="language-plaintext highlighter-rouge">reduceByKey</code> 결과가 이 영역에 들어가지 않으면, spark은 disk에 결과를 저장한다. 지금 예시에서는 <code class="language-plaintext highlighter-rouge">80% * 20%</code> 또는 executor당 1.6gb 가 할당된다.</p><h4 id="unroll">Unroll</h4><p>unroll process에 할당된 RAM의 양은 <code class="language-plaintext highlighter-rouge">spark.storage.unrollFraction * spark.storage.memoryFraction * spark.storage.safetyFraction = 0.2 * 0.6 * 0.9 = 0.108 or 10.8%</code> 이다. 이 메모리영역은 데이터를 메모리로 unrolling 할때 사용된다. unroll이 필요한 이유는 무엇일까? spark은 데이터를 serialized, deserialized form으로 저장가능하다. serialized 데이터는 직접적으로 사용될수 없고 사용하기전에 unrolling 작업을 해야한다. 따라서 이 메모리 영역은 unrolling에 사용되는 메모리 영역이다. storage RAM과 공유되고, 이말은 데이터를 unroll 하기위해서 메모리가 필요할때 이 작업이 Spark LRU cache에 저장되어있는 일부 파티션 정보가 지워질수 있음을 의미한다.</p><h3 id="caching">Caching</h3><p>Executor 수를 결정하기전에, caching에 대해서 살펴보자. <code class="language-plaintext highlighter-rouge">.persist</code> 또는 <code class="language-plaintext highlighter-rouge">.cache</code> 가 호출될때, 데이터가 메모리에 캐싱된다. <code class="language-plaintext highlighter-rouge">rdd.cache()</code> 는 <code class="language-plaintext highlighter-rouge">rdd.persist(storageLevel.MEMORY_ONLY)</code> 와 동일하다. 몇가지 storage level이 존재하는데, rdd가 메모리에 들어가지 않을때 수행할 정책을 결정한다.</p><ul><li><strong>MEMORY_ONLY</strong> : java Object로 데이터를 저장한다. int나 string에 대한 java object에는 추가로 저장할 데이터가 필요하므로 공간 효율적이지는 않지만, 가장 빠른방법이다. 데이터가 메모리에 완전히 캐싱될수 있다면 사용하면된다.<li><strong>MEMORY_ONLY_SER</strong> : 데이터를 serialized format으로 저장한다. 메모리에 더많은 데이터를 저장할수 있지만 사용될때 serialize/deserialize를 해야하므로 CPU의 부하가 조금 증가할수 있다.<li><strong>MEMORY_AND_DISK_SER</strong> : 데이터를 serialized format으로 저장한다. 메모리에 들어가지 않는 데이터는 disk에 serialized format으로 저장된다. 만약 캐싱이전에 heavy processing, join/reduce 작업이 있다면 좋은 선택이될수 있다.</ul><h2 id="spark-new-memory-architeture">Spark New Memory Architeture</h2><p>Spark 1.6.0 부터, 메모리 관리모델이 변경되었다. 이전 메모리 모델은 <code class="language-plaintext highlighter-rouge">StaticMemoryManager</code> 클래스에의해 구현되었고 이제는 legacy라 불린다. 호환성을 위해서 legacy 모델을 활성화 시킬수 있다. <code class="language-plaintext highlighter-rouge">spark.memory.useLegacyMode</code> 파라미터를 활성시키면 되는데, 디폴트로는 꺼져있다.</p><p>새로운 메모리 관리 모델은 <code class="language-plaintext highlighter-rouge">UnifieldMemoryManager</code>로 구현이 된다.</p><p><img data-proofer-ignore data-src="https://i0.wp.com/0x0fff.com/wp-content/uploads/2016/01/Spark-Memory-Management-1.6.0.png?w=1261&amp;ssl=1" alt="img" /></p><ol><li><p><strong>Reserved Memory</strong> : 이 메모리는 시스템에 의해서 예약된다, 사이즈는 하드코딩 되어있다. spark 1.6.0에서는 300MB이고 이는 spark 메모리 리전 계산에서 고려대상이 아니다. 참고로 Reserved Memory의 1.5배 이상의 힙공간을 executor에게 제공하지 않으면 에러가 발생한다.</p><li><p><strong>User Memory</strong> : <strong>Spark Memory</strong> 할당한후 남은 공간이다. RDD transformation에서 사용될 자료구조를 저장할수 있다. <code class="language-plaintext highlighter-rouge">User Memory Space = (“Java Heap” – “Reserved Memory”) * (1.0 – spark.memory.fraction) = (“Java Heap” – 300MB) * 0.25.</code> 만약 할당받은 공간이상을 사용하면 OOM error가 발생한다.</p><li><p><strong>Spark Memory</strong> : Apache Spark에 의해 관리되는 메모리 풀이다. <code class="language-plaintext highlighter-rouge">Spark Memory Space = (“Java Heap” – “Reserved Memory”) * spark.memory.fraction = (“Java Heap” – 300MB) * 0.75.</code> 이 공간은 <strong>Storage Memory</strong>와 <strong>Execution Memory</strong>로 나누어진다. 이 둘의 경계는 <code class="language-plaintext highlighter-rouge">spark.memory.storageFraction</code> 파라미터로 설정된는데 디폴트 값은 0.5이다. 이 경계는 스태틱하지 않고 메모리 부족시 경계가 옮겨질수 있다.</p><ol><li><strong>Storage Memory</strong>. 이 공간은 cached data, 일시적으로 serialized data가 저장되는 unroll에 의해서 사용된다. 또한 모든 brodcast 변수들또한 cached block에 저장된다. 모든 brodcast 변수들은 캐시에 저장되는데, <strong>MEMORY_AND_DISK</strong> persistence 수준으로 저장된다. 여기 저장된 데이터는 HDD로 evict 될수 있다.<li><strong>Execution Memory</strong>. 이 공간은 Spark task를 실행하는 동안 요구되는 객체들을 저장하는데 사용된다. 예를들어 shuffle intermediate buffer를 저장하는데 사용될수 있다. 또한 hash aggregation step을 위해서 hash table을 저장하는데 사용될수 있다. 충분한 메모리가 없다면 디스크로 데이터를 저장하는 기능도 수행한다. 하지만 이 공간에 있는 블락들은 다른 thread(task)에 의해서 강제로 evict될수 없다.</ol><p><strong>Execution Memory</strong> 가 <strong>Storage Memory</strong> 를 빌릴수 있는 몇가지 경우가 있다.</p><ul><li>Storage Memory 풀에서 공간이 남아있을때. 이 경우 storage memory 사이즈를 감소시키고 Execution memory 사이즈를 증가시킨다.<li>Storage Memory 공간크기가 초기 Storage Memory 설정공간을 초과하고 이 공간이 전부 사용되고 있을때. 이 경우 Storage Memory 크기가 초기 사이즈가 될때까지 데이터를 evict할수 있다.</ul><p>반대로 <strong>Storage Memory</strong> 또한 <strong>Execution Memory</strong> 공간을 빌릴수 있다. 이때 <strong>Execution Memory</strong>에 빈공간이 반드시 존재해야 한다.</p><p>만약 Spark cache를 사용한다면, executor에 캐싱된 데이터의 전체 용량은 최소 초기 Storage Memory 리젼 크기만큼 될것이다. 우리는 storage region 크기가 최소 초기 크기만큼은 된다는 것을 보장할 수 있다. 그 이유는 초기 크기보다 더 작아지도록 하면서, 데이터를 evict 할수는 없기 때문이다. 그러나 만약 Execution Memory가 이미 초기 사이즈를 넘어섰고, 그후에 storage memory에 데이터를 채워넣었다면, Execution memory에 있는 데이터를 강제로 evict할수는 없게된다, 따라서 실행하는 동안 storage memory 리젼은 초기 사이즈보다 더 적은 크기를 가질 수 밖에 없다.</p></ol><h2 id="출처">출처</h2><p><a href="http://0x0fff.com/spark-architecture/">http://0x0fff.com/spark-architecture/</a></p><p><a href="http://0x0fff.com/spark-memory-management/">http://0x0fff.com/spark-memory-management/</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/dataengineering/'>DataEngineering</a>, <a href='/categories/spark/'>Spark</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Spark Memory Architecture - Study Log&url=https://jaegukim.github.io/posts/spark-memory-architecture/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Spark Memory Architecture - Study Log&u=https://jaegukim.github.io/posts/spark-memory-architecture/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Spark Memory Architecture - Study Log&url=https://jaegukim.github.io/posts/spark-memory-architecture/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink('', 'Link copied successfully!')" data-toggle="tooltip" data-placement="top" title="Copy link"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/software-engineering-at-google/">Software Engineering at Google</a><li><a href="/posts/til/">TIL</a><li><a href="/posts/custom-default-backend-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0/">custom error page 띄우기</a><li><a href="/posts/cors-setting/">CORS setting</a><li><a href="/posts/helm-chart/">Helm Chart</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/spark/"><div class="card-body"> <span class="timeago small" >Sep 24, 2020<i class="unloaded">2020-09-24T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Spark와 Data Engineering 관련 프로젝트 시작하기</h3><div class="text-muted small"><p> What Is Spark? Open-source distributed general-purpose cluster-computing framework. How to start data engineering projects? Choose any framework, let’s say Kafka. Write some codes using that ...</p></div></div></a></div><div class="card"> <a href="/posts/rdds-vs-dataframes-and-datasets/"><div class="card-body"> <span class="timeago small" >Feb 2, 2021<i class="unloaded">2021-02-02T17:39:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>RDDs vs DataFrames vs Datasets</h3><div class="text-muted small"><p> Resilient Distributed Dataset(RDD) RDD는 데이터의 immutable distributed collection, 클러스터의 노드들에 분할되어있고 병렬적으로 처리됨. 여러 분산 노드에 걸쳐서 저장되는 변경이 불가능한 데이터(객체)의 집합으로 각각의 RDD는 여러개의 파티션으로 분리가 됩니다. 즉, 스파크 내에 저장된 데이터...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%A4%91%EC%B2%A9%EB%90%9C-schema-flattening%ED%95%98%EA%B8%B0/"><div class="card-body"> <span class="timeago small" >Feb 10, 2021<i class="unloaded">2021-02-10T08:56:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>중첩된 schema flattening하기</h3><div class="text-muted small"><p> def flattenSchema(schema: StructType, prefix: String = null): Array[Column] = { schema.fields.flatMap(f =&gt; { val colName = if (prefix == null) f.name else (prefix + "." + f.name) ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/pipfile/" class="btn btn-outline-primary" prompt="Older"><p>Pipfile</p></a> <a href="/posts/cachepersist/" class="btn btn-outline-primary" prompt="Newer"><p>Cache,Persist</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//jaegukim.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Spark Memory Architecture'; this.page.url = 'https://jaegukim.github.io/posts/spark-memory-architecture/'; this.page.identifier = '/posts/spark-memory-architecture/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">Jaegoo.Kim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jaegukim.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
