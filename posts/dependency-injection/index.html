<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="[Inversion of Control 이해하기] Chapter 3 - Dependency Injection" /><meta name="author" content="Jaegoo Kim" /><meta property="og:locale" content="en" /><meta name="description" content="Dependency Injection(DI)는 IoC를 구현하기위해 사용되는 디자인 패턴이다. DI는 의존하는 객체들을 class 밖에서 생성하도록 허락하며, 그러한 객체들을 여러가지 방법을 통해서 class에 제공해준다." /><meta property="og:description" content="Dependency Injection(DI)는 IoC를 구현하기위해 사용되는 디자인 패턴이다. DI는 의존하는 객체들을 class 밖에서 생성하도록 허락하며, 그러한 객체들을 여러가지 방법을 통해서 class에 제공해준다." /><link rel="canonical" href="https://jaegukim.github.io/posts/dependency-injection/" /><meta property="og:url" content="https://jaegukim.github.io/posts/dependency-injection/" /><meta property="og:site_name" content="Study Log" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-11-25T20:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Inversion of Control 이해하기] Chapter 3 - Dependency Injection" /><meta name="twitter:site" content="@JaeguKim" /><meta name="twitter:creator" content="@Jaegoo Kim" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jaegoo Kim"},"dateModified":"2021-03-10T16:08:56+08:00","datePublished":"2020-11-25T20:00:00+08:00","description":"Dependency Injection(DI)는 IoC를 구현하기위해 사용되는 디자인 패턴이다. DI는 의존하는 객체들을 class 밖에서 생성하도록 허락하며, 그러한 객체들을 여러가지 방법을 통해서 class에 제공해준다.","headline":"[Inversion of Control 이해하기] Chapter 3 - Dependency Injection","mainEntityOfPage":{"@type":"WebPage","@id":"https://jaegukim.github.io/posts/dependency-injection/"},"url":"https://jaegukim.github.io/posts/dependency-injection/"}</script><title>[Inversion of Control 이해하기] Chapter 3 - Dependency Injection | Study Log</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Study Log"><meta name="application-name" content="Study Log"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/22807942?s=460&u=cc1d822a8be2c87ac3aa4917adaadeca5487c515&v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Study Log</a></div><div class="site-subtitle font-italic">“ In order to be irreplaceable, one must always be different” – Coco Chanel</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/JaeguKim" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/JaeguKim" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['kimwithglasses','kakao.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Inversion of Control 이해하기] Chapter 3 - Dependency Injection</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Inversion of Control 이해하기] Chapter 3 - Dependency Injection</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Jaegoo.Kim </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Wed, Nov 25, 2020, 8:00 PM +0800" >Nov 25, 2020<i class="unloaded">2020-11-25T20:00:00+08:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Wed, Mar 10, 2021, 5:08 PM +0900" >Mar 10, 2021<i class="unloaded">2021-03-10T16:08:56+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1396 words">7 min read</span></div></div><div class="post-content"><p>Dependency Injection(DI)는 IoC를 구현하기위해 사용되는 디자인 패턴이다. DI는 의존하는 객체들을 class 밖에서 생성하도록 허락하며, 그러한 객체들을 여러가지 방법을 통해서 class에 제공해준다.</p><p>Dependency Injection pattern은 3가지 유형의 클래스를 포함한다.</p><ol><li><p><strong>Client Class</strong>: The client class (dependent class)는 service class에 의존하는 클래스를 뜻한다.</p><li><p><strong>Service Class</strong>: The service class(dependency)는 client class에 서비스를 제공하는 클래스를 뜻한다.</p><li><p><strong>Injector Class</strong>: The Injector class는 client class에 service class 객체를 주입하는 클래스를 뜻한다.</p></ol><p>다음은 위의 세클래스들간의 관계를 나타낸 그림이다.</p><p><img data-proofer-ignore data-src="https://www.tutorialsteacher.com/Content/images/ioc/DI.png" alt="img" /></p><p><a href="https://www.tutorialsteacher.com/Content/images/ioc/DI.png">source</a></p><p>위에서 보듯이, injector class는 service class의 객체를 생성하여 client 객체에게 주입하여준다. DI pattern은 service class 객체 생성의 책임을 client class 밖으로 분리한다.</p><h1 id="dependency-injection의-유형">Dependency Injection의 유형</h1><ul><li><p><strong>Constructor Injection</strong> : client class의 생성자를 통해서 의존성을 주입한다.</p><li><p><strong>Property Injection</strong> : Setter Injection이라고도 불리는데, client class의 public property를 통해서 의존성을 주입한다.</p><li><p><strong>Method Injection</strong> : client class는 dependency를 제공하기 위한 method를 선언하고 있는 interface를 구현하고 있고 injector는 client class에게 의존성을 제공하기 위해서 interface를 사용한다.</p></ul><p>아래는 DIP 섹션에서 구현했던 코드이다.</p><div lang="csharp" class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">interface</span> <span class="nc">ICustomerDataAccess</span>
<span class="p">{</span>
    <span class="kt">string</span> <span class="nf">GetCustomerName</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">CustomerDataAccess</span><span class="p">:</span> <span class="n">ICustomerDataAccess</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">CustomerDataAccess</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetCustomerName</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s">"Dummy Customer Name"</span><span class="p">;</span>        
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">DataAccessFactory</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="n">ICustomerDataAccess</span> <span class="nf">GetCustomerDataAccessObj</span><span class="p">()</span> 
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">CustomerDataAccess</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">CustomerBusinessLogic</span>
<span class="p">{</span>
    <span class="n">ICustomerDataAccess</span> <span class="n">_custDataAccess</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">CustomerBusinessLogic</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_custDataAccess</span> <span class="p">=</span> <span class="n">DataAccessFactory</span><span class="p">.</span><span class="nf">GetCustomerDataAccessObj</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetCustomerName</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">_custDataAccess</span><span class="p">.</span><span class="nf">GetCustomerName</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위 코드에서 <code class="language-plaintext highlighter-rouge">CustomerBusinessLogic</code> 클래스 내부에서 <code class="language-plaintext highlighter-rouge">DataAccessFactory</code>를 사용함을 알수있다. <code class="language-plaintext highlighter-rouge">ICustomerDataAccess</code>의 또다른 구현을 사용하고 싶다고 가정하자. 이 경우에 <code class="language-plaintext highlighter-rouge">CustomerBusinessLogic</code>의 소스코드를 변경해야함을 알수있다. 예를들어, <code class="language-plaintext highlighter-rouge">DataAccessFactory.GetCustomerDataAccessObj()</code> 대신 <code class="language-plaintext highlighter-rouge">DataAccessFactory.GetEmployeeDataAccessObj()</code> 로 변경하는 것처럼 말이다. DI pattern은 위와같은 문제를 해결한다.</p><p>다음 그림은 위의 예시에 대한 DI Pattern 구현을 나타낸 그림이다.</p><p><img data-proofer-ignore data-src="https://www.tutorialsteacher.com/Content/images/ioc/DI-example.png" alt="img" /></p><h2 id="constructor-injection">Constructor Injection</h2><p>생성자를 통해서 dependency를 제공하는것을 말한다.</p><p>예시코드를 보자.</p><div lang="csharp" class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">CustomerBusinessLogic</span>
<span class="p">{</span>
    <span class="n">ICustomerDataAccess</span> <span class="n">_dataAccess</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">CustomerBusinessLogic</span><span class="p">(</span><span class="n">ICustomerDataAccess</span> <span class="n">custDataAccess</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_dataAccess</span> <span class="p">=</span> <span class="n">custDataAccess</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="nf">CustomerBusinessLogic</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_dataAccess</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CustomerDataAccess</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="nf">ProcessCustomerData</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">_dataAccess</span><span class="p">.</span><span class="nf">GetCustomerName</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">interface</span> <span class="nc">ICustomerDataAccess</span>
<span class="p">{</span>
    <span class="kt">string</span> <span class="nf">GetCustomerName</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">CustomerDataAccess</span><span class="p">:</span> <span class="n">ICustomerDataAccess</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">CustomerDataAccess</span><span class="p">()</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetCustomerName</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span> 
    <span class="p">{</span>
        <span class="c1">//get the customer name from the db in real application        </span>
        <span class="k">return</span> <span class="s">"Dummy Customer Name"</span><span class="p">;</span> 
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위 예시에서 <code class="language-plaintext highlighter-rouge">CustomerBusinessLogic</code>은 <code class="language-plaintext highlighter-rouge">ICustomerDataAccessConstructor</code>타입의 파라미터를 가진 생성자를 포함하고 있다. 이제 호출 class에서 <code class="language-plaintext highlighter-rouge">ICustomerDataAccess</code>에 대한 객체를 주입해야한다.</p><div lang="csharp" class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">CustomerService</span>
<span class="p">{</span>
    <span class="n">CustomerBusinessLogic</span> <span class="n">_customerBL</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">CustomerService</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_customerBL</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CustomerBusinessLogic</span><span class="p">(</span><span class="k">new</span> <span class="nf">CustomerDataAccess</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetCustomerName</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">_customerBL</span><span class="p">.</span><span class="nf">ProcessCustomerData</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위 코드에서 보듯이 <code class="language-plaintext highlighter-rouge">CustomerService</code> 클래스가 <code class="language-plaintext highlighter-rouge">CustomerDataAccess</code> 객체를 생성하여 <code class="language-plaintext highlighter-rouge">CustomerBusinessLogic</code>클래스에 주입하는것을 알수있다. 따라서 <code class="language-plaintext highlighter-rouge">CustomerBusinessLogic</code>는 더이상 <code class="language-plaintext highlighter-rouge">CustomerDataAccess</code> 객체를 <code class="language-plaintext highlighter-rouge">new</code>키워드 또는 factory 클래스를 통해서 생성할 필요가 없게 되었다. 결과적으로 <code class="language-plaintext highlighter-rouge">CustomerBusinessLogic</code>과 <code class="language-plaintext highlighter-rouge">CustomerDataAccess</code>간에 결합도가 낮아졌다.</p><h2 id="property-injection">Property Injection</h2><p>Property Injection에서는 public property를 통해서 의존성이 제공된다.</p><div lang="csharp" class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">CustomerBusinessLogic</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">CustomerBusinessLogic</span><span class="p">()</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetCustomerName</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">DataAccess</span><span class="p">.</span><span class="nf">GetCustomerName</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">ICustomerDataAccess</span> <span class="n">DataAccess</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">CustomerService</span>
<span class="p">{</span>
    <span class="n">CustomerBusinessLogic</span> <span class="n">_customerBL</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">CustomerService</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_customerBL</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CustomerBusinessLogic</span><span class="p">();</span>
        <span class="n">_customerBL</span><span class="p">.</span><span class="n">DataAccess</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CustomerDataAccess</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetCustomerName</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">_customerBL</span><span class="p">.</span><span class="nf">GetCustomerName</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위에서 보듯이, <code class="language-plaintext highlighter-rouge">CustomerBusinessLogic</code> 클래스는 <code class="language-plaintext highlighter-rouge">DataAccess</code>라는 public property를 가지고 있고 <code class="language-plaintext highlighter-rouge">CustomerService</code> 클래스는 <code class="language-plaintext highlighter-rouge">CustomerDataAccess</code> 클래스를 생성하여 public property에 할당해준다.</p><h2 id="method-injection">Method Injection</h2><p>method injection에서는 의존성들이 함수를 통해서 주입된다. 이 메소드는 class method 일수도 있고 interface method 일수도 있다.</p><p>다음 코드는 interface method를 이용해서 method injection을 구현한 예이다.</p><div lang="csharp" class="language-csharp highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="k">interface</span> <span class="nc">IDataAccessDependency</span>
<span class="p">{</span>
    <span class="k">void</span> <span class="nf">SetDependency</span><span class="p">(</span><span class="n">ICustomerDataAccess</span> <span class="n">customerDataAccess</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">CustomerBusinessLogic</span> <span class="p">:</span> <span class="n">IDataAccessDependency</span>
<span class="p">{</span>
    <span class="n">ICustomerDataAccess</span> <span class="n">_dataAccess</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">CustomerBusinessLogic</span><span class="p">()</span>
    <span class="p">{</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetCustomerName</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">_dataAccess</span><span class="p">.</span><span class="nf">GetCustomerName</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>
        
    <span class="k">public</span> <span class="k">void</span> <span class="nf">SetDependency</span><span class="p">(</span><span class="n">ICustomerDataAccess</span> <span class="n">customerDataAccess</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_dataAccess</span> <span class="p">=</span> <span class="n">customerDataAccess</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">CustomerService</span>
<span class="p">{</span>
    <span class="n">CustomerBusinessLogic</span> <span class="n">_customerBL</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">CustomerService</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">_customerBL</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">CustomerBusinessLogic</span><span class="p">();</span>
        <span class="p">((</span><span class="n">IDataAccessDependency</span><span class="p">)</span><span class="n">_customerBL</span><span class="p">).</span><span class="nf">SetDependency</span><span class="p">(</span><span class="k">new</span> <span class="nf">CustomerDataAccess</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetCustomerName</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">_customerBL</span><span class="p">.</span><span class="nf">GetCustomerName</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>위 예에서 보듯이, <code class="language-plaintext highlighter-rouge">CustomerBusinessLogic</code>는 <code class="language-plaintext highlighter-rouge">IDataAccessDependency</code>를 구현하고 있고 interface는 <code class="language-plaintext highlighter-rouge">SetDependency()</code>함수를 포함한다. injector class <code class="language-plaintext highlighter-rouge">CustomerService</code> 는 이 함수를 dependent class(CustomerDataAccess)를 client class에 주입하기 위해서 사용한다.</p><p>지금까지, loosely coupled class들을 구현하기위해 IoC, DIP 그리고 DI를 적용했다. 실제 프로젝트에서는 dependent class들이 많아서 이러한 패턴을 구현하는데는 시간이 많이 소요된다. 바로 이문제를 해결하기 위해서 <strong>IoC Container</strong>가 도움을 줄 수 있다. 다음 챕터에서는 IoC Container에 대해서 알아보자.</p><h2 id="출처">출처</h2><p><a href="https://www.tutorialsteacher.com/ioc/dependency-injection">https://www.tutorialsteacher.com/ioc/dependency-injection</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/softwareengineering/'>SoftwareEngineering</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Inversion of Control 이해하기] Chapter 3 - Dependency Injection - Study Log&url=https://jaegukim.github.io/posts/dependency-injection/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Inversion of Control 이해하기] Chapter 3 - Dependency Injection - Study Log&u=https://jaegukim.github.io/posts/dependency-injection/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Inversion of Control 이해하기] Chapter 3 - Dependency Injection - Study Log&url=https://jaegukim.github.io/posts/dependency-injection/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink('', 'Link copied successfully!')" data-toggle="tooltip" data-placement="top" title="Copy link"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/software-engineering-at-google/">Software Engineering at Google</a><li><a href="/posts/til/">TIL</a><li><a href="/posts/custom-default-backend-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0/">custom error page 띄우기</a><li><a href="/posts/cors-setting/">CORS setting</a><li><a href="/posts/helm-chart/">Helm Chart</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/sequence-diagram-class-diagram/"><div class="card-body"> <span class="timeago small" >Jul 16, 2017<i class="unloaded">2017-07-16T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Sequence Diagram, Class Diagram</h3><div class="text-muted small"><p> 시퀀스 다이어그램 클래스 인스턴스(오브젝트) 간의 메시지를 표시하는 다이어그램이다. 클래스 다이어그램 클래스 관계를 표시해주는 다이어그램</p></div></div></a></div><div class="card"> <a href="/posts/sw%EC%97%90%EC%84%9C-%EB%AA%A8%EB%93%88%ED%99%94%EC%99%80-%EC%9E%98%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-%EC%A1%B0%EA%B1%B4/"><div class="card-body"> <span class="timeago small" >Jul 16, 2017<i class="unloaded">2017-07-16T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>SW에서 모듈화와 잘하기 위한 조건</h3><div class="text-muted small"><p> 모듈화 모듈화는 소프트웨어를 각 기능별로 분할하는 것을 의미하며, 각 기능별로 분할한 것을 모듈이라고 한다. 모듈화를 수행하면 소프트웨어의 복잡도가 감소하고, 변경이 쉬우며 프로그램 구현이 용이 잘하기 위한 조건 모듈이 하나의 기능만을 수행하고 다른 모듈과의 과도한 상호작용을 배제함 모듈을 독립성있게 만듬.(모듈을 수정하더라도 다...</p></div></div></a></div><div class="card"> <a href="/posts/%ED%99%94%EC%9D%B4%ED%8A%B8-%EB%B0%95%EC%8A%A4%EC%99%80-%EB%B8%94%EB%9E%99-%EB%B0%95%EC%8A%A4-%ED%85%8C%EC%8A%A4%ED%8A%B8%EC%9D%98-%EC%A0%95%EC%9D%98%EC%99%80-%EC%B0%A8%EC%9D%B4%EC%A0%90/"><div class="card-body"> <span class="timeago small" >Jul 17, 2017<i class="unloaded">2017-07-17T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>화이트 박스와 블랙 박스 테스트의 정의와 차이점</h3><div class="text-muted small"><p> 블랙박스 검사(Black-box testing) 소프트웨어가 수행할 특정 기능을 알기 위해서 각 기능이 완전히 작동되는 것을 입증하는 검사로서, 기능 검사라고도 함. 소프트웨어의 내부를 보지 않고, 입력과 출력값을 확인하여,기능의 유효성을 판단 화이트박스 테스트 모듈의 원시 코드를 오픈시킨 상태에서 원시코드의 논리적인 모든 경로를 검...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/dipdependency-inversion-principle/" class="btn btn-outline-primary" prompt="Older"><p>[Inversion of Control 이해하기] Chapter 2 - DIP(Dependency Inversion Principle)</p></a> <a href="/posts/ioc-container/" class="btn btn-outline-primary" prompt="Newer"><p>[Inversion of Control 이해하기] Chapter 4 - IoC Container</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//jaegukim.disqus.com/embed.js', disqusConfig: function() { this.page.title = '[Inversion of Control 이해하기] Chapter 3 - Dependency Injection'; this.page.url = 'https://jaegukim.github.io/posts/dependency-injection/'; this.page.identifier = '/posts/dependency-injection/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">Jaegoo.Kim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://jaegukim.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
